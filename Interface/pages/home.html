<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
  <script>
    function check(){
      var cookie_data = decodeURIComponent(document.cookie);
      var token = cookie_data.slice(cookie_data.indexOf("=")+1);
      if( token != ""){
      }else{
        window.location.href= "/sign-in";
      }
    }

    function permission(final){
      var cookie_data = decodeURIComponent(document.cookie);
        var token = cookie_data.slice(cookie_data.indexOf("=")+1);
        if( token != ""){
            var obj = `{"token":"${token}"}`;
            
            const caller = new XMLHttpRequest();
            const url = '/jwt/login';
            caller.open('POST',url);     
            caller.setRequestHeader('Content-Type', 'application/json');
            caller.onload = function() {
                response_got=JSON.parse(caller.responseText);
                if(response_got.status==109){
                  window.location=final;
                }else{
                  alert("Login to access the page");
                }
            }
            caller.send(obj);
        }
    }

    function permission2(){
      var cookie_data = decodeURIComponent(document.cookie);
        var token = cookie_data.slice(cookie_data.indexOf("=")+1);
        if( token != ""){
            var obj = `{"token":"${token}"}`;
    
            const caller = new XMLHttpRequest();
            const url = '/jwt/login';
            caller.open('POST',url);     
            caller.setRequestHeader('Content-Type', 'application/json');
            caller.onload = function() {
                response_got=JSON.parse(caller.responseText);
                document.getElementById('resp').innerHTML=response_got.message;
            }
            caller.send(obj);
        }
    }

  </script>
</head>
<body onload="check()">
  <br><br><br><br><br><br><br>
  <a onclick="permission(this.id)" id="/sign-in">hi</a>
  <a onclick="permission(this.id)" id="/sign-up">hi3</a>
  <input type="button" value="chk" onclick="permission2()">
  <div id="resp"></div>
</body>
</html>